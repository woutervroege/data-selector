<link rel="import" href="../polymer/polymer-element.html">

<dom-module id="pages-navigator">

  <script>
    /**
     * `pages-navigator`
     * 
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class PagesNavigator extends Polymer.GestureEventListeners(Polymer.Element) {
      static get is() { return 'pages-navigator'; }

      static get properties() {
        return {
          
          items: {
            type: Array,
          },

          selected: {
            type: String,
            notify: true,
          },
          
          selectedItem: {
            type: Object,
            computed: '_computeSelectedItem(selected, items.splices)',
            notify: true,
          },

          parentItem: {
            type: Object,
            computed: '_computeParentItem(selectedItem.parentId)',
            notify: true,
          },

          siblings: {
            type: Array,
            computed: '_computeSiblings(selectedItem.parentId, items.splices)',
            notify: true
          },

          children: {
            type: Array,
            computed: '_computeChildren(selectedItem.id, items.splices)',
            notify: true
          }

        }
      }

      back() {
        this.selected = this.parentItem.id
      }

      _computeSelectedItem(selected) {
        return this.items.find((item) => {
          return item.id == selected;
        }) || {};
      }
     
      _computeParentItem(parentId) {
        return this.items.find((item) => {
          return item.id == parentId;
        }) || {};
      }

      _computeSiblings(selectedItemParentId) {
        return this.items.filter((item) => {
          return item.parentId == selectedItemParentId;
        });
      }
      
      _computeChildren(selectedItemId) {
        return this.items.filter((item) => {
          return item.parentId == selectedItemId;
        });
      }

    }

    window.customElements.define(PagesNavigator.is, PagesNavigator);
  </script>
</dom-module>
